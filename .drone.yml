kind: pipeline
type: docker
name: default

steps:
  - name: build-and-restart
    image: docker
    privileged: true
    commands:
      - docker compose up tripbot_website --project-name tripsit-prod -d --force-recreate --build --remove-orphans
    volumes:
    - name: dockersock
      path: /var/run/docker.sock

volumes:
- name: dockersock
  host:
    path: /var/run/docker.sock
